[gd_scene load_steps=55 format=3 uid="uid://pbiww2xqys71"]

[ext_resource type="Script" uid="uid://bmpgb8g0ahd70" path="res://scene/Enemy/boss.gd" id="1_tgykv"]
[ext_resource type="Texture2D" uid="uid://r1difsvorayy" path="res://Assets/character/Warrior_Sheet-Effect.png" id="1_wmqlt"]
[ext_resource type="PackedScene" uid="uid://buxejbbf4pwo3" path="res://scene/handlers/gravity_handler.tscn" id="2_tgykv"]
[ext_resource type="PackedScene" uid="uid://c5sm8vvd8i46" path="res://scene/handlers/enemy/ai_handler.tscn" id="3_03cv6"]
[ext_resource type="PackedScene" uid="uid://drc15xactq2x7" path="res://scene/handlers/flip_handler.tscn" id="4_6outd"]
[ext_resource type="PackedScene" uid="uid://ubk5kajx1t3m" path="res://scene/handlers/health_handler.tscn" id="6_ske8f"]
[ext_resource type="PackedScene" uid="uid://bc7lla4vmayqf" path="res://scene/handlers/death_handler.tscn" id="7_jlj7u"]
[ext_resource type="PackedScene" uid="uid://ubr1r7ragr7w" path="res://scene/handlers/movement_handler.tscn" id="8_c67wr"]
[ext_resource type="PackedScene" uid="uid://cai0ofpluksfu" path="res://scene/handlers/drop_handler.tscn" id="9_hkf85"]
[ext_resource type="PackedScene" uid="uid://cobs3nhfhj316" path="res://scene/handlers/hurt_box.tscn" id="10_sbq3f"]
[ext_resource type="PackedScene" uid="uid://bd3teekf53c7k" path="res://scene/handlers/hit_box_handler.tscn" id="11_m7pec"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_tgykv"]
bg_color = Color(0.258824, 0.141176, 0.270588, 1)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_03cv6"]
bg_color = Color(0.901961, 0.270588, 0.223529, 1)
corner_radius_top_left = 3
corner_radius_top_right = 3
corner_radius_bottom_right = 3
corner_radius_bottom_left = 3

[sub_resource type="AtlasTexture" id="AtlasTexture_wmqlt"]
atlas = ExtResource("1_wmqlt")
region = Rect2(138, 176, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_hg27v"]
atlas = ExtResource("1_wmqlt")
region = Rect2(207, 176, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_2yq5q"]
atlas = ExtResource("1_wmqlt")
region = Rect2(276, 176, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_83p0b"]
atlas = ExtResource("1_wmqlt")
region = Rect2(345, 176, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_qqif5"]
atlas = ExtResource("1_wmqlt")
region = Rect2(0, 220, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_khunn"]
atlas = ExtResource("1_wmqlt")
region = Rect2(69, 220, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_fr5v0"]
atlas = ExtResource("1_wmqlt")
region = Rect2(138, 220, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_yrum3"]
atlas = ExtResource("1_wmqlt")
region = Rect2(207, 220, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_74ojp"]
atlas = ExtResource("1_wmqlt")
region = Rect2(276, 220, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_v3fe2"]
atlas = ExtResource("1_wmqlt")
region = Rect2(345, 220, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_7234i"]
atlas = ExtResource("1_wmqlt")
region = Rect2(0, 572, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_t3a35"]
atlas = ExtResource("1_wmqlt")
region = Rect2(69, 572, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_4i56t"]
atlas = ExtResource("1_wmqlt")
region = Rect2(138, 572, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_e1wni"]
atlas = ExtResource("1_wmqlt")
region = Rect2(207, 572, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_4c7pq"]
atlas = ExtResource("1_wmqlt")
region = Rect2(276, 572, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_68dln"]
atlas = ExtResource("1_wmqlt")
region = Rect2(345, 572, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_ow2r6"]
atlas = ExtResource("1_wmqlt")
region = Rect2(0, 132, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_8gphh"]
atlas = ExtResource("1_wmqlt")
region = Rect2(69, 132, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_q370i"]
atlas = ExtResource("1_wmqlt")
region = Rect2(138, 132, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_t5qh7"]
atlas = ExtResource("1_wmqlt")
region = Rect2(207, 132, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_u0y3j"]
atlas = ExtResource("1_wmqlt")
region = Rect2(345, 132, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_e2oua"]
atlas = ExtResource("1_wmqlt")
region = Rect2(0, 176, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_1fpt7"]
atlas = ExtResource("1_wmqlt")
region = Rect2(69, 176, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_c8pwv"]
atlas = ExtResource("1_wmqlt")
region = Rect2(276, 132, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_uxhv8"]
atlas = ExtResource("1_wmqlt")
region = Rect2(0, 0, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_tgykv"]
atlas = ExtResource("1_wmqlt")
region = Rect2(69, 0, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_03cv6"]
atlas = ExtResource("1_wmqlt")
region = Rect2(138, 0, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_6outd"]
atlas = ExtResource("1_wmqlt")
region = Rect2(207, 0, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_070p8"]
atlas = ExtResource("1_wmqlt")
region = Rect2(276, 0, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_ske8f"]
atlas = ExtResource("1_wmqlt")
region = Rect2(345, 0, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_jlj7u"]
atlas = ExtResource("1_wmqlt")
region = Rect2(0, 44, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_c67wr"]
atlas = ExtResource("1_wmqlt")
region = Rect2(69, 44, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_hkf85"]
atlas = ExtResource("1_wmqlt")
region = Rect2(138, 44, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_sbq3f"]
atlas = ExtResource("1_wmqlt")
region = Rect2(207, 44, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_m7pec"]
atlas = ExtResource("1_wmqlt")
region = Rect2(276, 44, 69, 44)

[sub_resource type="AtlasTexture" id="AtlasTexture_pngs8"]
atlas = ExtResource("1_wmqlt")
region = Rect2(345, 44, 69, 44)

[sub_resource type="SpriteFrames" id="SpriteFrames_hg27v"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wmqlt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hg27v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2yq5q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_83p0b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qqif5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_khunn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fr5v0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yrum3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_74ojp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v3fe2")
}],
"loop": false,
"name": &"die",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7234i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t3a35")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4i56t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e1wni")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4c7pq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_68dln")
}],
"loop": false,
"name": &"double_hit",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ow2r6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8gphh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q370i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t5qh7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u0y3j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e2oua")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1fpt7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c8pwv")
}],
"loop": false,
"name": &"hit",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_uxhv8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tgykv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_03cv6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6outd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_070p8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ske8f")
}],
"loop": false,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_jlj7u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_c67wr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hkf85")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sbq3f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m7pec")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pngs8")
}],
"loop": false,
"name": &"run",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tgykv"]
size = Vector2(13, 19)

[sub_resource type="CircleShape2D" id="CircleShape2D_tgykv"]
radius = 14.0357

[sub_resource type="CircleShape2D" id="CircleShape2D_03cv6"]
radius = 30.5941

[sub_resource type="RectangleShape2D" id="RectangleShape2D_03cv6"]
size = Vector2(154, 20)

[node name="Boss" type="CharacterBody2D"]
collision_layer = 4
script = ExtResource("1_tgykv")

[node name="BossUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_left = -23.0
offset_top = -16.0
offset_right = 17.0
offset_bottom = 24.0
metadata/_edit_use_anchors_ = true

[node name="HealthBar" type="ProgressBar" parent="BossUI"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_top = -1.0
offset_bottom = 3.0
grow_horizontal = 2
theme_override_styles/background = SubResource("StyleBoxFlat_tgykv")
theme_override_styles/fill = SubResource("StyleBoxFlat_03cv6")
value = 50.0
show_percentage = false

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_hg27v")
animation = &"idle"
autoplay = "idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(-5.5, 8.5)
shape = SubResource("RectangleShape2D_tgykv")

[node name="Handlers" type="Node2D" parent="."]

[node name="AIHandler" parent="Handlers" node_paths=PackedStringArray("left_cast", "right_cast", "left_wall_cast", "right_wall_cast", "movement") instance=ExtResource("3_03cv6")]
left_cast = NodePath("../../leftWCast")
right_cast = NodePath("../../RightWCast")
left_wall_cast = NodePath("../../leftCast")
right_wall_cast = NodePath("../../RightCast")
movement = NodePath("../MovementHandler")

[node name="FlipHandler" parent="Handlers" instance=ExtResource("4_6outd")]

[node name="GravityHandler" parent="Handlers" instance=ExtResource("2_tgykv")]

[node name="MovementHandler" parent="Handlers" instance=ExtResource("8_c67wr")]
move_speed = 50.0
acceleration = 2.0

[node name="DeathHandler" parent="Handlers" node_paths=PackedStringArray("parent") instance=ExtResource("7_jlj7u")]
parent = NodePath("../..")
type = "Enemy"

[node name="HealthHandler" parent="Handlers" node_paths=PackedStringArray("death_handler") instance=ExtResource("6_ske8f")]
max_health = 100
death_handler = NodePath("../DeathHandler")
type = "Enemy"

[node name="Drop_handler" parent="Handlers" instance=ExtResource("9_hkf85")]

[node name="HurtBox" parent="Handlers" instance=ExtResource("10_sbq3f")]
visible = false
collision_layer = 4
collision_mask = 2

[node name="CollisionShape2D" parent="Handlers/HurtBox" index="0"]
position = Vector2(-5, 9)
shape = SubResource("CircleShape2D_tgykv")

[node name="Audio" parent="Handlers/HurtBox" index="1"]
position = Vector2(-10, 8)

[node name="HitBoxHandler" parent="Handlers" node_paths=PackedStringArray("health_handler") instance=ExtResource("11_m7pec")]
position = Vector2(-11, 8)
collision_layer = 4
collision_mask = 2
health_handler = NodePath("../HealthHandler")

[node name="CollisionShape2D" parent="Handlers/HitBoxHandler" index="0"]
position = Vector2(6, 0)
shape = SubResource("CircleShape2D_03cv6")

[node name="RightWCast" type="RayCast2D" parent="."]
position = Vector2(4, 8)
target_position = Vector2(0, 17)

[node name="RightCast" type="RayCast2D" parent="."]
position = Vector2(4, 8)
target_position = Vector2(20, 0)

[node name="leftWCast" type="RayCast2D" parent="."]
position = Vector2(-19, 8)
target_position = Vector2(0, 17)

[node name="leftCast" type="RayCast2D" parent="."]
position = Vector2(-19, 8)
target_position = Vector2(-16, 0)

[node name="DetectionArea" type="Area2D" parent="."]
position = Vector2(-37, 14)
collision_layer = 4
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
visible = false
position = Vector2(67, 0)
shape = SubResource("RectangleShape2D_03cv6")

[editable path="Handlers/HurtBox"]
[editable path="Handlers/HitBoxHandler"]
